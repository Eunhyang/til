## Django stuydy week1

#### 초간단 정규식

----

- 정규식 (Regular Expression)
  - 반복적인 표현을 특별한 방법으로 수식화 해 놓은 것!


- 정규 표현식은 왜 필요한가?

ex) 주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민등록 번호의 뒷자리를  * 문자로 변경해라

````python
import re
data = ""
park 800905-1049118
kim 700905-1059119
""

pat = re.compile("(\d{6})[-]\d{7}")
print(pat.sub("\g<1>-*******",data))
````

=> 정규식을 모르는 상태로 프로그램을 짜면,

````python
result = []
for line in data.split("\n"):
    world result = []
    for word in line.split(" "):
        if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():
            word = word[:6] + "-" + "*******"
            word_result.append(word)
            result.append("".joinn(word_result))
print("\n".join(result)) 
````



#### 문법

> 문자열에서 핸드폰 번호를 찾는 정규표현식의 예제

/^\d{3}-\d{3,4}-\d{4}$/m

|    /     | ^\d{3}-\d{3,4}-\d{4}$ |    /     |   m   |
| :------: | :-------------------: | :------: | :---: |
| 패턴구분자 시작 |      찾을 문자열의 패턴       | 패턴 구분자 끝 | 패턴변경자 |



#### 패턴구분자

- 정규식의 패턴이 달라질 경우 그것을 구분하는 문자로, 정규식 패턴이 하나만 있을 경우에는 굳이 쓸 필요는 없지만 대부분 붙인다. 
- 난해하게 만드는 주범
  - 패턴구분자는 특수문자 중 역슬래쉬(\)를 제외하고 아무거나 쓸 수 있기 때문
  - 보통 슬래쉬(/)를 많이 사용하지만 규칙이 있는 것은 아님



#### 메타문자

> 정규식에서 일정한 의미를 가지고 쓰는 문자를 메타 문자라고 부른다.

| **^******  | **문자열의 시작**                              |
| ---------- | ---------------------------------------- |
| **$**      | **문자열의 종료, 옵션에 따라 문장의 끝 또는 문서의 끝에 배치된다.** |
| **.**      | **임의의 한 문자**                             |
| **[]**     | **문자 클래스, 문자 클래스 안에 들어가 있는 문자는 그 바깥에서 하나의 문자로 취급된다.** |
| **\|**     | **or를 나타냄**                              |
| **?**      | **앞 문자가 없거나 하나 있음**                      |
| **+**      | **앞 문자가 하나 이상임**                         |
| *****      | **앞 문자가 0개 이상임**                         |
| **{n, m}** | **앞 문자가 n개 이상 m개 이하. {0,1}  은 ?와 같은 의미다.** |
| **{n, }**  | **앞 문자가 n개 이상. 위의 상태에서 m이 생략된 형태이다. {0,}이면 *와 같고 {1,}이면 +와 같은 의미이다.** |
| **()**     | 하나의 패턴구분자 안에 서브 패턴을 지정해서 사용할 경우 괄호로 묶어주는 방식을 사용한다. |



#### 문자 클래스 [] : [ 와 ] 사이의 문자들과 매치하는가

ex)` [abc]` : "a, b, c 중 한 개의 문자와 매치"

=> "a" 매치O / "before" 매치O / "dude" 매치X

- []안의 두 문자 사이에 하이픈(-)을 사용하면, 두 문자 사이의 범위를 의미
  - ex) `[a-d] == [abcd]` `[0-4] == [01234]`
    - `[a-zA-Z]` : 알파벳 모두
    - `[0-9]` : 숫자 \d `[가-힇]` :한글
  - **주의!** ^는 반대의 의미를 갖는다. 예를 들어 `[^0-9]`는 숫자가 아닌 문자에만 매치된다.



#### Dot(.) : 임의의 한 문자

> Dot(.)은 줄바꿈 문자인 \n을 제외한 모든 문자와 매치된다.

`a.b` : "a + 모든문자 + b"

=> "aab", "aOb" 매치O / "abc" 매치X



#### 반복 * : 앞 문자가 0개 이상

`ca*t` : a가 0부터 무한대로 반복될 수 있다.

ex) "ct", "cat", "caaaaaat"



#### 반복 + : 앞 문자가 0개 이상

`ca+t` : a가 1부터 무한대로 반복 가능

ex) "cat", "caaaat" O / "ct" 매치X



#### 반복 {m,n} : 반복횟수가 m부터 n

`ca{2}t` : "c + a(반드시 2번 반복) + t"

`ca{2,}t` : "c + a(2이상 반복) + t"

`ca{2,5}t` : "c + a(2~5회 반복) + t"



#### ? : * 반복은 아니지만 비슷한 개념 == {0,1}

`ab?c` : b가 있어도 되고 없어도 됨



#### 패턴변경자

> 패턴구분자가 끝나면 그 뒤에 쓰는 것으로, 패턴에 일괄적으로 변경을 가할 때 사용한다.

- i
  - 패턴을 대소문자 구분없이 검사
  -  `[a-z]` == `[a-zA-Z]`
  - 가장 많이 쓰이는 패턴
- s
  - 임의의 한 문자를 가리키는 . 메타 문자에 개행 문자(\n)도 포함
  -  .이 줄바꿈도 임의의 한 문자로 취급
- m
  -  문자열에 줄바꿈이 있을 경우, 여러 줄로 취급하여 검사(줄바꿈이 없다면 써도 의미가 없음)
  - 원래 정규표현식 쓸 때 줄바꿈은 무시되는데, 이걸 사용하면 줄바꿈을 적용해서 검사
  - ^는 한줄의 시작, $는 한 줄의 끝으로 의미가 달라짐
- x
  - 공백 문자를 찾지 않고 무시
  - 단, 이스케이프(역슬래쉬하고 같이 쓸 경우)하거나 문자 클래스 안에 있을 경우에는 공백을 찾음



#### 이메일 체크 정규식

````javascript
var reg =
/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*
@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\[a-zA-Z]{2,3}$/i;
var email1 = "whdahek@naver.com";
var email2 = "thisisnotemail";
var email3 = "isit@email";
var email4 = "list@hanmail.net";

alert(reg.test(email1)); //ture
alert(reg.test(email2)); //false
alert(reg.test(email3)); //false
alert(reg.test(email4)); //true
````

[정규식 연습 사이트](https://regexper.com/#%2F%5E%5B0-9a-zA-Z%5D(%5B-_%5C.%5D%3F%5B0-9a-zA-Z%5D)*%40%5B0-9a-zA-Z%5D(%5B-_%5C.%5D%3F%5B0-9a-zA-Z%5D)*%5C.%5Ba-zA-Z%5D%7B2%2C3%7D%24%2Fi)



